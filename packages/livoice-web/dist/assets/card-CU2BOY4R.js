var St=s=>{throw TypeError(s)};var ot=(s,t,e)=>t.has(s)||St("Cannot "+e);var r=(s,t,e)=>(ot(s,t,"read from private field"),e?e.call(s):t.get(s)),p=(s,t,e)=>t.has(s)?St("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(s):t.set(s,e),c=(s,t,e,i)=>(ot(s,t,"write to private field"),i?i.call(s,e):t.set(s,e),e),d=(s,t,e)=>(ot(s,t,"access private method"),e);import{S as Kt,p as Tt,c as E,s as et,d as $,n as st,i as ut,e as Et,f as Lt,g as Z,h as Gt,k as Nt,l as It,m as rt,o as qt,q as jt,r as R,v as Ut,w as _t,x as W,j as At}from"./index-B5zT1MZw.js";import{c as Bt}from"./cn-C0Y9tLwQ.js";var v,u,z,b,_,L,x,F,V,G,N,P,k,K,j,h,H,ht,ct,lt,dt,pt,ft,yt,Pt,Qt,Ht=(Qt=class extends Kt{constructor(t,e){super();p(this,h);p(this,v);p(this,u);p(this,z);p(this,b);p(this,_);p(this,L);p(this,x);p(this,F);p(this,V);p(this,G);p(this,N);p(this,P);p(this,k);p(this,K);p(this,j,new Set);this.options=e,c(this,v,t),c(this,F,null),c(this,x,Tt()),this.bindMethods(),this.setOptions(e)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(r(this,u).addObserver(this),xt(r(this,u),this.options)?d(this,h,H).call(this):this.updateResult(),d(this,h,dt).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return mt(r(this,u),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return mt(r(this,u),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,d(this,h,pt).call(this),d(this,h,ft).call(this),r(this,u).removeObserver(this)}setOptions(t){const e=this.options,i=r(this,u);if(this.options=r(this,v).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof E(this.options.enabled,r(this,u))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");d(this,h,yt).call(this),r(this,u).setOptions(this.options),e._defaulted&&!et(this.options,e)&&r(this,v).getQueryCache().notify({type:"observerOptionsUpdated",query:r(this,u),observer:this});const n=this.hasListeners();n&&Mt(r(this,u),i,this.options,e)&&d(this,h,H).call(this),this.updateResult(),n&&(r(this,u)!==i||E(this.options.enabled,r(this,u))!==E(e.enabled,r(this,u))||$(this.options.staleTime,r(this,u))!==$(e.staleTime,r(this,u)))&&d(this,h,ht).call(this);const o=d(this,h,ct).call(this);n&&(r(this,u)!==i||E(this.options.enabled,r(this,u))!==E(e.enabled,r(this,u))||o!==r(this,K))&&d(this,h,lt).call(this,o)}getOptimisticResult(t){const e=r(this,v).getQueryCache().build(r(this,v),t),i=this.createResult(e,t);return zt(this,i)&&(c(this,b,i),c(this,L,this.options),c(this,_,r(this,u).state)),i}getCurrentResult(){return r(this,b)}trackResult(t,e){return new Proxy(t,{get:(i,n)=>(this.trackProp(n),e==null||e(n),n==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&r(this,x).status==="pending"&&r(this,x).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(i,n))})}trackProp(t){r(this,j).add(t)}getCurrentQuery(){return r(this,u)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const e=r(this,v).defaultQueryOptions(t),i=r(this,v).getQueryCache().build(r(this,v),e);return i.fetch().then(()=>this.createResult(i,e))}fetch(t){return d(this,h,H).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),r(this,b)))}createResult(t,e){var Ot;const i=r(this,u),n=this.options,o=r(this,b),a=r(this,_),m=r(this,L),g=t!==i?t.state:r(this,z),{state:S}=t;let l={...S},I=!1,y;if(e._optimisticResults){const T=this.hasListeners(),X=!T&&xt(t,e),D=T&&Mt(t,i,e,n);(X||D)&&(l={...l,...Nt(S.data,t.options)}),e._optimisticResults==="isRestoring"&&(l.fetchStatus="idle")}let{error:A,errorUpdatedAt:B,status:O}=l;y=l.data;let J=!1;if(e.placeholderData!==void 0&&y===void 0&&O==="pending"){let T;o!=null&&o.isPlaceholderData&&e.placeholderData===(m==null?void 0:m.placeholderData)?(T=o.data,J=!0):T=typeof e.placeholderData=="function"?e.placeholderData((Ot=r(this,N))==null?void 0:Ot.state.data,r(this,N)):e.placeholderData,T!==void 0&&(O="success",y=It(o==null?void 0:o.data,T,e),I=!0)}if(e.select&&y!==void 0&&!J)if(o&&y===(a==null?void 0:a.data)&&e.select===r(this,V))y=r(this,G);else try{c(this,V,e.select),y=e.select(y),y=It(o==null?void 0:o.data,y,e),c(this,G,y),c(this,F,null)}catch(T){c(this,F,T)}r(this,F)&&(A=r(this,F),y=r(this,G),B=Date.now(),O="error");const it=l.fetchStatus==="fetching",nt=O==="pending",at=O==="error",Ct=nt&&it,Rt=y!==void 0,q={status:O,fetchStatus:l.fetchStatus,isPending:nt,isSuccess:O==="success",isError:at,isInitialLoading:Ct,isLoading:Ct,data:y,dataUpdatedAt:l.dataUpdatedAt,error:A,errorUpdatedAt:B,failureCount:l.fetchFailureCount,failureReason:l.fetchFailureReason,errorUpdateCount:l.errorUpdateCount,isFetched:l.dataUpdateCount>0||l.errorUpdateCount>0,isFetchedAfterMount:l.dataUpdateCount>g.dataUpdateCount||l.errorUpdateCount>g.errorUpdateCount,isFetching:it,isRefetching:it&&!nt,isLoadingError:at&&!Rt,isPaused:l.fetchStatus==="paused",isPlaceholderData:I,isRefetchError:at&&Rt,isStale:gt(t,e),refetch:this.refetch,promise:r(this,x),isEnabled:E(e.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const T=Y=>{q.status==="error"?Y.reject(q.error):q.data!==void 0&&Y.resolve(q.data)},X=()=>{const Y=c(this,x,q.promise=Tt());T(Y)},D=r(this,x);switch(D.status){case"pending":t.queryHash===i.queryHash&&T(D);break;case"fulfilled":(q.status==="error"||q.data!==D.value)&&X();break;case"rejected":(q.status!=="error"||q.error!==D.reason)&&X();break}}return q}updateResult(){const t=r(this,b),e=this.createResult(r(this,u),this.options);if(c(this,_,r(this,u).state),c(this,L,this.options),r(this,_).data!==void 0&&c(this,N,r(this,u)),et(e,t))return;c(this,b,e);const i=()=>{if(!t)return!0;const{notifyOnChangeProps:n}=this.options,o=typeof n=="function"?n():n;if(o==="all"||!o&&!r(this,j).size)return!0;const a=new Set(o??r(this,j));return this.options.throwOnError&&a.add("error"),Object.keys(r(this,b)).some(m=>{const f=m;return r(this,b)[f]!==t[f]&&a.has(f)})};d(this,h,Pt).call(this,{listeners:i()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&d(this,h,dt).call(this)}},v=new WeakMap,u=new WeakMap,z=new WeakMap,b=new WeakMap,_=new WeakMap,L=new WeakMap,x=new WeakMap,F=new WeakMap,V=new WeakMap,G=new WeakMap,N=new WeakMap,P=new WeakMap,k=new WeakMap,K=new WeakMap,j=new WeakMap,h=new WeakSet,H=function(t){d(this,h,yt).call(this);let e=r(this,u).fetch(this.options,t);return t!=null&&t.throwOnError||(e=e.catch(st)),e},ht=function(){d(this,h,pt).call(this);const t=$(this.options.staleTime,r(this,u));if(ut||r(this,b).isStale||!Et(t))return;const i=Lt(r(this,b).dataUpdatedAt,t)+1;c(this,P,Z.setTimeout(()=>{r(this,b).isStale||this.updateResult()},i))},ct=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(r(this,u)):this.options.refetchInterval)??!1},lt=function(t){d(this,h,ft).call(this),c(this,K,t),!(ut||E(this.options.enabled,r(this,u))===!1||!Et(r(this,K))||r(this,K)===0)&&c(this,k,Z.setInterval(()=>{(this.options.refetchIntervalInBackground||Gt.isFocused())&&d(this,h,H).call(this)},r(this,K)))},dt=function(){d(this,h,ht).call(this),d(this,h,lt).call(this,d(this,h,ct).call(this))},pt=function(){r(this,P)&&(Z.clearTimeout(r(this,P)),c(this,P,void 0))},ft=function(){r(this,k)&&(Z.clearInterval(r(this,k)),c(this,k,void 0))},yt=function(){const t=r(this,v).getQueryCache().build(r(this,v),this.options);if(t===r(this,u))return;const e=r(this,u);c(this,u,t),c(this,z,t.state),this.hasListeners()&&(e==null||e.removeObserver(this),t.addObserver(this))},Pt=function(t){rt.batch(()=>{t.listeners&&this.listeners.forEach(e=>{e(r(this,b))}),r(this,v).getQueryCache().notify({query:r(this,u),type:"observerResultsUpdated"})})},Qt);function $t(s,t){return E(t.enabled,s)!==!1&&s.state.data===void 0&&!(s.state.status==="error"&&t.retryOnMount===!1)}function xt(s,t){return $t(s,t)||s.state.data!==void 0&&mt(s,t,t.refetchOnMount)}function mt(s,t,e){if(E(t.enabled,s)!==!1&&$(t.staleTime,s)!=="static"){const i=typeof e=="function"?e(s):e;return i==="always"||i!==!1&&gt(s,t)}return!1}function Mt(s,t,e,i){return(s!==t||E(i.enabled,s)===!1)&&(!e.suspense||s.state.status!=="error")&&gt(s,e)}function gt(s,t){return E(t.enabled,s)!==!1&&s.isStaleByTime($(t.staleTime,s))}function zt(s,t){return!et(s.getCurrentResult(),t)}var M,U,C,w,Q,tt,bt,Ft,Vt=(Ft=class extends Kt{constructor(t,e){super();p(this,Q);p(this,M);p(this,U);p(this,C);p(this,w);c(this,M,t),this.setOptions(e),this.bindMethods(),d(this,Q,tt).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){var i;const e=this.options;this.options=r(this,M).defaultMutationOptions(t),et(this.options,e)||r(this,M).getMutationCache().notify({type:"observerOptionsUpdated",mutation:r(this,C),observer:this}),e!=null&&e.mutationKey&&this.options.mutationKey&&qt(e.mutationKey)!==qt(this.options.mutationKey)?this.reset():((i=r(this,C))==null?void 0:i.state.status)==="pending"&&r(this,C).setOptions(this.options)}onUnsubscribe(){var t;this.hasListeners()||(t=r(this,C))==null||t.removeObserver(this)}onMutationUpdate(t){d(this,Q,tt).call(this),d(this,Q,bt).call(this,t)}getCurrentResult(){return r(this,U)}reset(){var t;(t=r(this,C))==null||t.removeObserver(this),c(this,C,void 0),d(this,Q,tt).call(this),d(this,Q,bt).call(this)}mutate(t,e){var i;return c(this,w,e),(i=r(this,C))==null||i.removeObserver(this),c(this,C,r(this,M).getMutationCache().build(r(this,M),this.options)),r(this,C).addObserver(this),r(this,C).execute(t)}},M=new WeakMap,U=new WeakMap,C=new WeakMap,w=new WeakMap,Q=new WeakSet,tt=function(){var e;const t=((e=r(this,C))==null?void 0:e.state)??jt();c(this,U,{...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset})},bt=function(t){rt.batch(()=>{var e,i,n,o,a,m,f,g;if(r(this,w)&&this.hasListeners()){const S=r(this,U).variables,l=r(this,U).context,I={client:r(this,M),meta:this.options.meta,mutationKey:this.options.mutationKey};(t==null?void 0:t.type)==="success"?((i=(e=r(this,w)).onSuccess)==null||i.call(e,t.data,S,l,I),(o=(n=r(this,w)).onSettled)==null||o.call(n,t.data,null,S,l,I)):(t==null?void 0:t.type)==="error"&&((m=(a=r(this,w)).onError)==null||m.call(a,t.error,S,l,I),(g=(f=r(this,w)).onSettled)==null||g.call(f,void 0,t.error,S,l,I))}this.listeners.forEach(S=>{S(r(this,U))})})},Ft),kt=R.createContext(!1),Wt=()=>R.useContext(kt);kt.Provider;function Jt(){let s=!1;return{clearReset:()=>{s=!1},reset:()=>{s=!0},isReset:()=>s}}var Xt=R.createContext(Jt()),Yt=()=>R.useContext(Xt),Zt=(s,t)=>{(s.suspense||s.throwOnError||s.experimental_prefetchInRender)&&(t.isReset()||(s.retryOnMount=!1))},te=s=>{R.useEffect(()=>{s.clearReset()},[s])},ee=({result:s,errorResetBoundary:t,throwOnError:e,query:i,suspense:n})=>s.isError&&!t.isReset()&&!s.isFetching&&i&&(n&&s.data===void 0||Ut(e,[s.error,i])),se=s=>{if(s.suspense){const e=n=>n==="static"?n:Math.max(n??1e3,1e3),i=s.staleTime;s.staleTime=typeof i=="function"?(...n)=>e(i(...n)):e(i),typeof s.gcTime=="number"&&(s.gcTime=Math.max(s.gcTime,1e3))}},re=(s,t)=>s.isLoading&&s.isFetching&&!t,ie=(s,t)=>(s==null?void 0:s.suspense)&&t.isPending,wt=(s,t,e)=>t.fetchOptimistic(s).catch(()=>{e.clearReset()});function ne(s,t,e){var l,I,y,A,B;const i=Wt(),n=Yt(),o=_t(),a=o.defaultQueryOptions(s);(I=(l=o.getDefaultOptions().queries)==null?void 0:l._experimental_beforeQuery)==null||I.call(l,a),a._optimisticResults=i?"isRestoring":"optimistic",se(a),Zt(a,n),te(n);const m=!o.getQueryCache().get(a.queryHash),[f]=R.useState(()=>new t(o,a)),g=f.getOptimisticResult(a),S=!i&&s.subscribed!==!1;if(R.useSyncExternalStore(R.useCallback(O=>{const J=S?f.subscribe(rt.batchCalls(O)):st;return f.updateResult(),J},[f,S]),()=>f.getCurrentResult(),()=>f.getCurrentResult()),R.useEffect(()=>{f.setOptions(a)},[a,f]),ie(a,g))throw wt(a,f,n);if(ee({result:g,errorResetBoundary:n,throwOnError:a.throwOnError,query:o.getQueryCache().get(a.queryHash),suspense:a.suspense}))throw g.error;if((A=(y=o.getDefaultOptions().queries)==null?void 0:y._experimental_afterQuery)==null||A.call(y,a,g),a.experimental_prefetchInRender&&!ut&&re(g,i)){const O=m?wt(a,f,n):(B=o.getQueryCache().get(a.queryHash))==null?void 0:B.promise;O==null||O.catch(st).finally(()=>{f.updateResult()})}return a.notifyOnChangeProps?g:f.trackResult(g)}function vt(s,t){return ne(s,Ht)}function Dt(s,t){const e=_t(),[i]=R.useState(()=>new Vt(e,s));R.useEffect(()=>{i.setOptions(s)},[i,s]);const n=R.useSyncExternalStore(R.useCallback(a=>i.subscribe(rt.batchCalls(a)),[i]),()=>i.getCurrentResult(),()=>i.getCurrentResult()),o=R.useCallback((a,m)=>{i.mutate(a,m).catch(st)},[i]);if(n.error&&Ut(i.options.throwOnError,[n.error]))throw n.error;return{...n,mutate:o,mutateAsync:n.mutate}}const ae=(s,t)=>W({url:"/transcripts",method:"GET",signal:t},s),oe=()=>["/transcripts"],ue=s=>{const{query:t,request:e}={};return{queryKey:(t==null?void 0:t.queryKey)??oe(),queryFn:({signal:o})=>ae(e,o),...t}};function Se(s,t){const e=ue(),i=vt(e);return i.queryKey=e.queryKey,i}const he=(s,t,e)=>W({url:`/transcripts/${s}`,method:"GET",signal:e},t),ce=s=>[`/transcripts/${s}`],le=(s,t)=>{const{query:e,request:i}=t??{};return{queryKey:(e==null?void 0:e.queryKey)??ce(s),queryFn:({signal:a})=>he(s,i,a),enabled:!!s,...e}};function Te(s,t,e){const i=le(s,t),n=vt(i);return n.queryKey=i.queryKey,n}const de=(s,t,e,i)=>W({url:`/transcripts/${s}/upload-text`,method:"POST",headers:{"Content-Type":"application/json"},data:t,signal:i},e),pe=s=>{const t=["postTranscriptsIdUploadText"],{mutation:e,request:i}={mutation:{mutationKey:t},request:void 0};return{mutationFn:o=>{const{id:a,data:m}=o??{};return de(a,m,i)},...e}},Ee=(s,t)=>{const e=pe();return Dt(e)},fe=(s,t,e)=>W({url:`/transcripts/${s}/chunks`,method:"GET",signal:e},t),ye=s=>[`/transcripts/${s}/chunks`],me=(s,t)=>{const{query:e,request:i}=t??{};return{queryKey:(e==null?void 0:e.queryKey)??ye(s),queryFn:({signal:a})=>fe(s,i,a),enabled:!!s,...e}};function Ie(s,t,e){const i=me(s,t),n=vt(i);return n.queryKey=i.queryKey,n}const be=(s,t,e,i)=>W({url:`/transcripts/${s}/chat`,method:"POST",headers:{"Content-Type":"application/json"},data:t,signal:i},e),ge=s=>{const t=["postTranscriptsIdChat"],{mutation:e,request:i}={mutation:{mutationKey:t},request:void 0};return{mutationFn:o=>{const{id:a,data:m}=o??{};return be(a,m,i)},...e}},qe=(s,t)=>{const e=ge();return Dt(e)},xe=({children:s,className:t})=>At.jsx("div",{className:Bt("w-full rounded-2xl border border-slate-200 bg-white/80 p-6 shadow-[0_20px_45px_rgba(15,23,42,0.15)] backdrop-blur",t),children:s});export{xe as C,Te as a,Ie as b,Ee as c,qe as d,Se as u};
