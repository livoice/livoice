mutation ChatProject($input: ChatProjectInput!) {
  chatProject(input: $input) {
    chatId
    answer
    messages {
      id
      role
      content
      createdAt
      debugData {
        config {
          id
          name
          createdAt
          systemPrompt
          openai {
            model
            temperature
            maxOutputTokens
          }
          context {
            maxInputTokens
            reservedTokens
            historyTokenBudget
          }
          segments {
            tokenBudget
            maxCount
          }
        }
        resolvedSystemPrompt
        userMessageWithContext
        history {
          messagesIncluded
          tokensUsed
          tokenBudget
          messages {
            role
            content
            tokens
          }
        }
        segments {
          id
          text
          transcriptTitle
          speaker
          startMs
          endMs
          similarityScore
          estimatedTokens
        }
        segmentTokensUsed
        openaiResponse {
          model
          promptTokens
          completionTokens
          totalTokens
        }
        timing {
          startedAt
          completedAt
        }
      }
    }
    references {
      id
      text
      startMs
      endMs
      speaker
      transcriptTitle
    }
  }
}
